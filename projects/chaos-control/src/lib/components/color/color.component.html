<label
  [for]="id"
  [class.required]="required"
>
  <ng-content></ng-content>
</label>

<div class="d-flex align-items-stretch">
  <button
    class="d-flex align-items-center"
    title="Color"
    [class.border-radius-left]="borderRadiusLeft"
    [disabled]="isDisabled"
    (click)="colorInput.click()"
  >
    <icon
      size="1em"
      type="square"
      [fill]="fullHex.test(_model || '') ? _model : [null, 'current']"
      fillRotate="90"
      [stroke]="fullHex.test(_model || '') ? _model : ['current']"
    ></icon>
  </button>
  <input
    [(ngModel)]="model"
    spellcheck="false"
    size="5"
    type="text"
    [class.active]="ngControl.control?.value !== null"
    [class.border-radius-right]="borderRadiusRight"
    [class.invalid]="ngControl.control?.invalid"
    [disabled]="isDisabled"
    [id]="id"
    (beforeinput)="onBeforeinput($event)"
    (blur)="onTouched()"
  />
</div>

<ul *ngIf="ngControl.control?.errors">
  <li *ngIf="ngControl.control?.errors?.['invalid']">
    invalid model
  </li>
</ul>

<input
  #colorInput
  type="color"
  (change)="onChangeColor($event)"
/>
