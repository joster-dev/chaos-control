<label [class.required]="required">
  <ng-content></ng-content>
</label>

<div class="d-flex align-items-center">
  <div>
    <button
      class="white-space-nowrap"
      [class.br-end]="borderRadiusRight"
      [class.br-start]="borderRadiusLeft"
      [class.active]="ngControl.value !== null"
      [disabled]="isDisabled"
      (click)="fileInput.click()"
    >
      <icon
        type="folder"
        size="1rem"
        class="me-2"
        [fill]="[null, 'current']"
        fillRotate="90"
      ></icon>
      Choose {{multiple ? 'Files' : 'File'}}
    </button>
  </div>
  <div
    *ngIf="ngControl.value"
    class="ml-2"
  >
    {{fileNames}}
  </div>
</div>

<!-- <ul *ngIf="ngControl.control?.errors">
  <li *ngIf="ngControl.control?.errors?.['acceptedTypes']">
    valid types are {{acceptedTypes.join(', ')}}
  </li>
  <li *ngIf="ngControl.control?.errors?.['sizeLimitMb']">
    max file size is {{sizeLimit}}
  </li>
  <li *ngIf="ngControl.control?.errors?.['invalid']">
    invalid model
  </li>
</ul> -->

<input
  [(ngModel)]="model"
  #fileInput
  type="file"
  [accept]="acceptedTypes.join()"
  [multiple]="multiple"
  [id]="id"
  (change)="onFileChange($event)"
/>